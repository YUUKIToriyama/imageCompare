{
  "version": 3,
  "sources": ["/home/runner/work/imageCompare/imageCompare/src/components/ImageCompare.jsx"],
  "sourcesContent": ["/* ImageCompare.jsx */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Switch from '@material-ui/core/Switch';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\n\n// Leaflet\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\n\n// Leaflet.Control.Opacity\nimport 'leaflet.control.opacity/dist/L.Control.Opacity.css';\nimport 'leaflet.control.opacity';\n\n// Leaflet.Sync\nimport 'leaflet.sync';\n\nconst imageObjectToImageLayer = (imageObject) => {\n\t/* \u5F15\u6570imageObject\u3068\u3057\u3066\u60F3\u5B9A\u3055\u308C\u308B\u3082\u306E\n\t{\n\t\tname: \"IMG_1192.jpg\",\n\t\twidth: 1000,\n\t\theight: 670,\n\t\tbase64: \"data:image/jpg;base64,xxxxx...\"\n\t}\n\t*/\n\tlet fileName = imageObject.name;\n\tlet width = imageObject.width;\n\tlet height = imageObject.height;\n\tlet imageLayer = L.imageOverlay(imageObject.base64, [\n\t\t[(-1 * height) / 2, (-1 * width) / 2],\n\t\t[height / 2, width / 2],\n\t]);\n\treturn { fileName: fileName, imageLayer: imageLayer };\n};\n\n// \u4E8C\u679A\u306E\u753B\u50CF\u3092\u30AA\u30FC\u30D0\u30FC\u30EC\u30A4\u3057\u3066\u8868\u793A\u3059\u308B\u30E2\u30FC\u30C9\nclass OverlayView extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.viewer;\n\t\tthis.layers = {};\n\t\tthis.viewerRef = React.createRef();\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.viewer = L.map(this.viewerRef.current, {\n\t\t\tcenter: [0, 0],\n\t\t\tcrs: L.CRS.Simple,\n\t\t\tzoom: 0,\n\t\t});\n\n\t\tthis.props.images.forEach((imageObject) => {\n\t\t\tlet { fileName, imageLayer } = imageObjectToImageLayer(imageObject);\n\t\t\tthis.layers[fileName] = imageLayer;\n\t\t});\n\t\tObject.keys(this.layers).forEach((key) => {\n\t\t\tthis.viewer.addLayer(this.layers[key]);\n\t\t});\n\n\t\tL.control\n\t\t\t.layers({}, this.layers, {\n\t\t\t\tcollapsed: false,\n\t\t\t})\n\t\t\t.addTo(this.viewer);\n\t\tL.control\n\t\t\t.opacity(this.layers, {\n\t\t\t\tlabel: '\u900F\u660E\u5EA6\u3092\u5909\u66F4',\n\t\t\t\tcollapsed: false,\n\t\t\t})\n\t\t\t.addTo(this.viewer);\n\t}\n\n\trender() {\n\t\treturn <div ref={this.viewerRef} style={{ width: '100%', height: '90vh' }}></div>;\n\t}\n}\n\n// \u4E8C\u679A\u306E\u753B\u50CF\u3092\u4E26\u3079\u3066\u8868\u793A\u3059\u308B\u30E2\u30FC\u30C9\nclass MultipleView extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.viewer1;\n\t\tthis.viewer2;\n\t\tthis.viewer1Ref = React.createRef();\n\t\tthis.viewer2Ref = React.createRef();\n\t\tthis.imageLayers = [];\n\t}\n\n\tcomponentDidMount() {\n\t\t// props\u304B\u3089\u4E0E\u3048\u3089\u308C\u305F\u753B\u50CF\u306E\u8AAD\u307F\u8FBC\u307F\n\t\tthis.props.images.forEach((imageObject, key) => {\n\t\t\tlet { fileName, imageLayer } = imageObjectToImageLayer(imageObject);\n\t\t\tlet that = {};\n\t\t\tthat[fileName] = imageLayer;\n\t\t\tthis.imageLayers.push(that);\n\t\t});\n\t\t// \u5DE6\u753B\u9762\u3092\u4F5C\u6210\n\t\tthis.viewer1 = L.map(this.viewer1Ref.current, {\n\t\t\tcenter: [0, 0],\n\t\t\tzoom: 0,\n\t\t\tcrs: L.CRS.Simple,\n\t\t});\n\t\tL.control.layers({}, this.imageLayers[0], { collapsed: false }).addTo(this.viewer1);\n\t\tthis.viewer1.addLayer(Object.values(this.imageLayers[0])[0]);\n\t\t// \u53F3\u753B\u9762\u3092\u4F5C\u6210\n\t\tthis.viewer2 = L.map(this.viewer2Ref.current, {\n\t\t\tcenter: [0, 0],\n\t\t\tzoom: 0,\n\t\t\tcrs: L.CRS.Simple,\n\t\t});\n\t\tL.control.layers({}, this.imageLayers[1], { collapsed: false }).addTo(this.viewer2);\n\t\tthis.viewer2.addLayer(Object.values(this.imageLayers[1])[0]);\n\n\t\t// \u53F3\u753B\u9762\u3068\u5DE6\u753B\u9762\u306E\u52D5\u304D\u3092\u9023\u52D5\u3055\u305B\u308B\n\t\tthis.viewer1.sync(this.viewer2);\n\t\tthis.viewer2.sync(this.viewer1);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div ref={this.viewer1Ref} style={{ width: '50%', height: '80vh', float: 'left' }}></div>\n\t\t\t\t<div ref={this.viewer2Ref} style={{ width: '50%', height: '80vh' }}></div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nclass ImageCompare extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.OVERLAY = true;\n\t\tthis.MULTIPLE = false;\n\t\tthis.state = {\n\t\t\tview: this.OVERLAY,\n\t\t\ttoggleLabel: '\u30AA\u30FC\u30D0\u30FC\u30EC\u30A4\u8868\u793A',\n\t\t};\n\t\tthis.changeView = this.changeView.bind(this);\n\t}\n\n\tchangeView() {\n\t\tthis.setState((prevState) => ({\n\t\t\tview: !prevState.view,\n\t\t\ttoggleLabel: prevState.view == true ? '\u4E8C\u753B\u9762\u8868\u793A' : '\u30AA\u30FC\u30D0\u30FC\u30EC\u30A4\u8868\u793A',\n\t\t}));\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<FormControlLabel control={<Switch checked={this.state.view} onChange={this.changeView}></Switch>} label={this.state.toggleLabel} />\n\t\t\t\t{this.state.view === this.OVERLAY && <OverlayView images={this.props.images} />}\n\t\t\t\t{this.state.view === this.MULTIPLE && <MultipleView images={this.props.images} />}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nImageCompare.propTypes = {\n\timages: PropTypes.array.isRequired,\n};\nexport default ImageCompare;\n"],
  "mappings": "AAEA;AACA;AACA;AACA;AAGA;AACA;AAGA;AACA;AAGA;AAEA,MAAM,0BAA0B,CAAC;AAShC,MAAI,WAAW,YAAY;AAC3B,MAAI,QAAQ,YAAY;AACxB,MAAI,SAAS,YAAY;AACzB,MAAI,aAAa,EAAE,aAAa,YAAY,QAAQ;AAAA,IACnD,CAAE,KAAK,SAAU,GAAI,KAAK,QAAS;AAAA,IACnC,CAAC,SAAS,GAAG,QAAQ;AAAA;AAEtB,SAAO,CAAE,UAAoB;AAAA;AAlC9B,0BAsC0B,MAAM;AAAA,EAC/B,YAAY;AACX,UAAM;AACN,SAAK;AACL,SAAK,SAAS;AACd,SAAK,YAAY,MAAM;AAAA;AAAA,EAGxB;AACC,SAAK,SAAS,EAAE,IAAI,KAAK,UAAU,SAAS;AAAA,MAC3C,QAAQ,CAAC,GAAG;AAAA,MACZ,KAAK,EAAE,IAAI;AAAA,MACX,MAAM;AAAA;AAGP,SAAK,MAAM,OAAO,QAAQ,CAAC;AAC1B,UAAI,CAAE,UAAU,cAAe,wBAAwB;AACvD,WAAK,OAAO,YAAY;AAAA;AAEzB,WAAO,KAAK,KAAK,QAAQ,QAAQ,CAAC;AACjC,WAAK,OAAO,SAAS,KAAK,OAAO;AAAA;AAGlC,MAAE,QACA,OAAO,IAAI,KAAK,QAAQ;AAAA,MACxB,WAAW;AAAA,OAEX,MAAM,KAAK;AACb,MAAE,QACA,QAAQ,KAAK,QAAQ;AAAA,MACrB,OAAO;AAAA,MACP,WAAW;AAAA,OAEX,MAAM,KAAK;AAAA;AAAA,EAGd;AACC,WAAO,oCAAC,OAAD;AAAA,MAAK,KAAK,KAAK;AAAA,MAAW,OAAO,CAAE,OAAO,QAAQ,QAAQ;AAAA;AAAA;AAAA;AA3EnE,2BAgF2B,MAAM;AAAA,EAChC,YAAY;AACX,UAAM;AACN,SAAK;AACL,SAAK;AACL,SAAK,aAAa,MAAM;AACxB,SAAK,aAAa,MAAM;AACxB,SAAK,cAAc;AAAA;AAAA,EAGpB;AAEC,SAAK,MAAM,OAAO,QAAQ,CAAC,aAAa;AACvC,UAAI,CAAE,UAAU,cAAe,wBAAwB;AACvD,UAAI,OAAO;AACX,WAAK,YAAY;AACjB,WAAK,YAAY,KAAK;AAAA;AAGvB,SAAK,UAAU,EAAE,IAAI,KAAK,WAAW,SAAS;AAAA,MAC7C,QAAQ,CAAC,GAAG;AAAA,MACZ,MAAM;AAAA,MACN,KAAK,EAAE,IAAI;AAAA;AAEZ,MAAE,QAAQ,OAAO,IAAI,KAAK,YAAY,IAAI,CAAE,WAAW,QAAS,MAAM,KAAK;AAC3E,SAAK,QAAQ,SAAS,OAAO,OAAO,KAAK,YAAY,IAAI;AAEzD,SAAK,UAAU,EAAE,IAAI,KAAK,WAAW,SAAS;AAAA,MAC7C,QAAQ,CAAC,GAAG;AAAA,MACZ,MAAM;AAAA,MACN,KAAK,EAAE,IAAI;AAAA;AAEZ,MAAE,QAAQ,OAAO,IAAI,KAAK,YAAY,IAAI,CAAE,WAAW,QAAS,MAAM,KAAK;AAC3E,SAAK,QAAQ,SAAS,OAAO,OAAO,KAAK,YAAY,IAAI;AAGzD,SAAK,QAAQ,KAAK,KAAK;AACvB,SAAK,QAAQ,KAAK,KAAK;AAAA;AAAA,EAGxB;AACC,WACC,oCAAC,OAAD,MACC,oCAAC,OAAD;AAAA,MAAK,KAAK,KAAK;AAAA,MAAY,OAAO,CAAE,OAAO,OAAO,QAAQ,QAAQ,OAAO;AAAA,QACzE,oCAAC,OAAD;AAAA,MAAK,KAAK,KAAK;AAAA,MAAY,OAAO,CAAE,OAAO,OAAO,QAAQ;AAAA;AAAA;AAAA;AA5H9D,2BAkI2B,MAAM;AAAA,EAChC,YAAY;AACX,UAAM;AACN,SAAK,UAAU;AACf,SAAK,WAAW;AAChB,SAAK,QAAQ;AAAA,MACZ,MAAM,KAAK;AAAA,MACX,aAAa;AAAA;AAEd,SAAK,aAAa,KAAK,WAAW,KAAK;AAAA;AAAA,EAGxC;AACC,SAAK,SAAS,CAAC,cAAe;AAAA,MAC7B,MAAM,CAAC,UAAU;AAAA,MACjB,aAAa,UAAU,QAAQ,OAAO,mCAAU;AAAA;AAAA;AAAA,EAIlD;AACC,WACC,oCAAC,OAAD,MACC,oCAAC,kBAAD;AAAA,MAAkB,SAAS,oCAAC,QAAD;AAAA,QAAQ,SAAS,KAAK,MAAM;AAAA,QAAM,UAAU,KAAK;AAAA;AAAA,MAAuB,OAAO,KAAK,MAAM;AAAA,QACpH,KAAK,MAAM,SAAS,KAAK,WAAW,oCAAC,aAAD;AAAA,MAAa,QAAQ,KAAK,MAAM;AAAA,QACpE,KAAK,MAAM,SAAS,KAAK,YAAY,oCAAC,cAAD;AAAA,MAAc,QAAQ,KAAK,MAAM;AAAA;AAAA;AAAA;AAM3E,aAAa,YAAY;AAAA,EACxB,QAAQ,UAAU,MAAM;AAAA;AAEzB,eAAe;",
  "names": []
}
