{"version":3,"sources":["components/MyDrawer.jsx","components/ScrollDialog.jsx","components/MyAppBar.jsx","components/ImageLoader.jsx","components/PreviewImage.jsx","components/ImageTransform.jsx","components/ImageCompare.jsx","components/Workflow.jsx","opencv-utils/opencv-utils.js","components/LoadingSpinner.jsx","components/MainContent.jsx","App.jsx","index.js"],"names":["MyDrawer","props","handleDrawerOpen","setState","open","handleDrawerClose","state","bind","classes","this","Drawer","className","drawer","variant","anchor","paper","drawerPaper","drawerHeader","IconButton","onClick","ChevronLeft","Divider","List","Link","href","ListItem","button","ListItemIcon","GitHub","ListItemText","Info","Help","React","Component","withStyles","theme","width","flexShrink","display","alignItems","padding","spacing","mixins","toolbar","justifyContent","ScrollDialog","handleClickOpen","handleClose","descriptionElement","createRef","Button","label","Dialog","onClose","scroll","aria-labelledby","aria-describedby","DialogTitle","id","title","DialogContent","dividers","DialogContentText","ref","tabIndex","content","DialogActions","color","MyAppBar","drawerRef","current","root","AppBar","position","Toolbar","edge","menuButton","aria-label","Typography","message","flexGrow","marginRight","ImageLoader","fileInputCallback","file","imageObject","img","Image","src","base64","onload","height","onInputImageChange","Box","labelText","loaderId","imagePreview","multiple","callbackFunction","console","log","name","buttonComponent","component","PhotoCamera","textFieldComponent","type","accept","PreviewImage","mapRef","map","layer","imageBounds","markers","image","L","latLngBounds","center","maxBounds","pad","crs","CRS","Simple","imageOverlay","addTo","fitBounds","i","n_marker","divIcon","html","getCenter","lat","lng","Math","cos","PI","sin","marker","draggable","icon","push","setCorrespondingPoints","correspondingPoint","latlng","getLatLng","x","y","onPointsSet","imageId","forEach","on","event","style","ImageTransform","images","correspondingPointsArray","invisibleCanvasRef","correspondingPoints","array","image_1","image_2","correspondingPoints_1","hash","flat","correspondingPoints_2","createImgElement","dataUrl","imgElement","new_image_1","srcA","srcB","cPointsA","cPointsB","n_points","H","matrixA","cv","matFromArray","CV_32F","matrixB","method","Mat","findHomography","dst","zeros","rows","cols","CV_8UC3","warpPerspective","Size","INTER_LINEAR","BORDER_CONSTANT","Scalar","warpImage","imread","imshow","toDataURL","onImageProcessingDone","delete","imageObjectToImageLayer","fileName","imageLayer","OverlayView","viewer","layers","viewerRef","zoom","Object","keys","key","addLayer","control","collapsed","opacity","MultipleView","viewer1","viewer2","viewer1Ref","viewer2Ref","imageLayers","that","values","sync","float","ImageCompare","OVERLAY","MULTIPLE","view","toggleLabel","changeView","prevState","FormControlLabel","Switch","checked","onChange","GuideButtons","disabled","activeStep","handleBack","isAllowedToStepForward","handleNext","steps","length","Workflow","renderImageLoader","inputImages","executeImageMatching","imageCropRef","handleImageProcessingDone","transformedImage","processing","handleReset","getEachSteps","step","StepContent","every","inputImage","CircularProgress","undefined","Stepper","orientation","index","Step","StepLabel","Paper","square","elevation","resetContainer","marginTop","actionsContainer","marginBottom","opencvUtils","OPENCV_URL","onloadCallback","script","document","createElement","setAttribute","addEventListener","getBuildInformation","error","querySelector","appendChild","url","callback","crossOrigin","IMREAD_COLOR","SCRIPT_URL","LoadingSpinner","opencvLoaded","Icon","fontSize","split","line","propsTypes","PropTypes","bool","isRequired","defaultProps","MainContent","loadOpenCV","createMuiTheme","palette","primary","orange","typography","fontFamily","join","h1","h2","h3","h4","h5","h6","App","ThemeProvider","CssBaseline","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.5c54cb0b.chunk.js","sourcesContent":["/* MyDrawer.jsx */\n\nimport React from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\n\nimport {\n\tLink,\n\tDrawer,\n\tDivider,\n\tList,\n\tListItem,\n\tListItemIcon,\n\tListItemText,\n\tIconButton,\n} from '@material-ui/core';\nimport { ChevronLeft, Help, GitHub, Info } from '@material-ui/icons';\n\nconst drawerWidth = 240;\n\nconst useStyles = (theme) => ({\n\tdrawer: {\n\t\twidth: drawerWidth,\n\t\tflexShrink: 0,\n\t},\n\tdrawerPaper: {\n\t\twidth: drawerWidth,\n\t},\n\tdrawerHeader: {\n\t\tdisplay: 'flex',\n\t\talignItems: 'center',\n\t\tpadding: theme.spacing(0, 1),\n\t\t// necessary for content to be below app bar\n\t\t...theme.mixins.toolbar,\n\t\tjustifyContent: 'flex-end',\n\t},\n});\nclass MyDrawer extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\topen: false,\n\t\t};\n\t\t//classes = this.props;\n\t\tthis.handleDrawerClose.bind(this);\n\t\tthis.handleDrawerOpen.bind(this);\n\t}\n\n\thandleDrawerOpen = () => {\n\t\tthis.setState({\n\t\t\topen: true,\n\t\t});\n\t};\n\thandleDrawerClose = () => {\n\t\tthis.setState({\n\t\t\topen: false,\n\t\t});\n\t};\n\trender() {\n\t\tconst { classes } = this.props;\n\t\treturn (\n\t\t\t<Drawer\n\t\t\t\tclassName={classes.drawer}\n\t\t\t\tvariant='persistent'\n\t\t\t\tanchor='left'\n\t\t\t\topen={this.state.open}\n\t\t\t\tclasses={{\n\t\t\t\t\tpaper: classes.drawerPaper,\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div className={classes.drawerHeader}>\n\t\t\t\t\t<IconButton onClick={this.handleDrawerClose}>\n\t\t\t\t\t\t<ChevronLeft />\n\t\t\t\t\t</IconButton>\n\t\t\t\t</div>\n\t\t\t\t<Divider />\n\t\t\t\t<List>\n\t\t\t\t\t<Link href='https://github.com/YUUKIToriyama/imageCompare'>\n\t\t\t\t\t\t<ListItem button key='Github'>\n\t\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t\t<GitHub />\n\t\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t\t<ListItemText>View Source Code</ListItemText>\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t</Link>\n\t\t\t\t\t<ListItem button key='Information'>\n\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t<Info />\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t<ListItemText>More information</ListItemText>\n\t\t\t\t\t</ListItem>\n\t\t\t\t\t<ListItem button key='Help'>\n\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t<Help />\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t<ListItemText>Show Help</ListItemText>\n\t\t\t\t\t</ListItem>\n\t\t\t\t</List>\n\t\t\t</Drawer>\n\t\t);\n\t}\n}\n\nexport default withStyles(useStyles)(MyDrawer);\n","/* ScrollDialog.jsx */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n\tButton,\n\tDialog,\n\tDialogActions,\n\tDialogContent,\n\tDialogContentText,\n\tDialogTitle,\n} from '@material-ui/core';\n\nclass ScrollDialog extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\topen: false,\n\t\t};\n\t\tthis.descriptionElement = React.createRef();\n\t}\n\n\thandleClickOpen = () => {\n\t\tthis.setState({\n\t\t\topen: true,\n\t\t});\n\t};\n\n\thandleClose = () => {\n\t\tthis.setState({\n\t\t\topen: false,\n\t\t});\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<Button onClick={this.handleClickOpen}>{this.props.label}</Button>\n\t\t\t\t<Dialog\n\t\t\t\t\topen={this.state.open}\n\t\t\t\t\tonClose={this.handleClose}\n\t\t\t\t\tscroll='paper'\n\t\t\t\t\taria-labelledby='scroll-dialog-title'\n\t\t\t\t\taria-describedby='scroll-dialog-description'\n\t\t\t\t>\n\t\t\t\t\t<DialogTitle id='scroll-dialog-title'>{this.props.title}</DialogTitle>\n\t\t\t\t\t<DialogContent dividers={true}>\n\t\t\t\t\t\t<DialogContentText\n\t\t\t\t\t\t\tid='scroll-dialog-description'\n\t\t\t\t\t\t\tref={this.descriptionElement}\n\t\t\t\t\t\t\ttabIndex={-1}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{this.props.content}\n\t\t\t\t\t\t</DialogContentText>\n\t\t\t\t\t</DialogContent>\n\t\t\t\t\t<DialogActions>\n\t\t\t\t\t\t<Button onClick={this.handleClose} color='primary'>\n\t\t\t\t\t\t\tOK\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DialogActions>\n\t\t\t\t</Dialog>\n\t\t\t</div>\n\t\t);\n\t}\n}\nexport default ScrollDialog;\n\nScrollDialog.propTypes = {\n\tlabel: PropTypes.string,\n\ttitle: PropTypes.string,\n\tcontent: PropTypes.any,\n};\n","/* MyAppBar.jsx */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { AppBar, Toolbar, Typography, IconButton } from '@material-ui/core';\nimport MenuIcon from '@material-ui/icons/Menu';\n\n// 自作モジュールの読み込み\nimport MyDrawer from './MyDrawer';\nimport ScrollDialog from './ScrollDialog';\n\nconst useStyles = (theme) => ({\n\troot: {\n\t\tflexGrow: 1,\n\t},\n\tmenuButton: {\n\t\tmarginRight: theme.spacing(2),\n\t},\n\ttitle: {\n\t\tflexGrow: 1,\n\t},\n});\n\nclass MyAppBar extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.drawerRef = React.createRef();\n\t}\n\n\thandleDrawerOpen = () => {\n\t\tthis.drawerRef.current.handleDrawerOpen();\n\t};\n\n\trender() {\n\t\tconst { classes } = this.props;\n\t\treturn (\n\t\t\t<div className={classes.root}>\n\t\t\t\t<AppBar position='static'>\n\t\t\t\t\t<Toolbar>\n\t\t\t\t\t\t<IconButton edge='start' className={classes.menuButton} color='inherit' aria-label='menu' onClick={this.handleDrawerOpen}>\n\t\t\t\t\t\t\t<MenuIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t<Typography variant='h6' className={classes.title}>\n\t\t\t\t\t\t\t{this.props.title}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<ScrollDialog label='Help' title='About this app' content={this.props.message} />\n\t\t\t\t\t</Toolbar>\n\t\t\t\t</AppBar>\n\t\t\t\t<MyDrawer ref={this.drawerRef} />\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default withStyles(useStyles)(MyAppBar);\n\nMyAppBar.propTypes = {\n\tmessage: PropTypes.string,\n\ttitle: PropTypes.string.isRequired,\n};\n","/* ImageLoader.jsx */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Box, IconButton } from '@material-ui/core';\nimport { PhotoCamera } from '@material-ui/icons';\nimport FileInputComponent from 'react-file-input-previews-base64';\n\nclass ImageLoader extends React.Component {\n\tfileInputCallback = (file) => {\n\t\tlet imageObject = file;\n\t\tlet img = new Image();\n\t\timg.src = imageObject.base64;\n\t\timg.onload = () => {\n\t\t\timageObject['width'] = img.width;\n\t\t\timageObject['height'] = img.height;\n\t\t\t// 親コンポーネントに読み込んだ画像を登録\n\t\t\tthis.props.onInputImageChange(imageObject);\n\t\t};\n\t\t/* imageObjectには以下のようなオブジェクトが入ります\n\t\t{\n\t\t\tname: 'IMG_20160813_102226.jpg',\n\t\t\ttype: 'image/jpeg',\n\t\t\tsize: 645,\n\t\t\tbase64: 'data:image/jpeg;base64,/9j/4SzyRXhpZgAATU0AKgA...',\n\t\t\tfile: File,\n\t\t\twidth: 320,\n\t\t\theight: 260\n\t\t};\n\t\t*/\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<Box>\n\t\t\t\t<FileInputComponent\n\t\t\t\t\tlabelText={this.props.loaderId + 1 + '枚目'}\n\t\t\t\t\timagePreview={true}\n\t\t\t\t\tmultiple={false}\n\t\t\t\t\tcallbackFunction={(file) => {\n\t\t\t\t\t\tconsole.log(file.name + ' has been loaded.');\n\t\t\t\t\t\tthis.fileInputCallback(file);\n\t\t\t\t\t}}\n\t\t\t\t\tbuttonComponent={\n\t\t\t\t\t\t<IconButton color='primary' aria-label='upload picture' component='span'>\n\t\t\t\t\t\t\t<PhotoCamera />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t}\n\t\t\t\t\ttextFieldComponent={<input type='text' />}\n\t\t\t\t\taccept='image/*'\n\t\t\t\t/>\n\t\t\t</Box>\n\t\t);\n\t}\n}\nexport default ImageLoader;\n\nImageLoader.propTypes = {\n\tloaderId: PropTypes.number.isRequired,\n\tonInputImageChange: PropTypes.func.isRequired,\n};\n","/* PreviewImage.jsx */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\n// Leaflet\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\n\n/*\nimport markerIcon from \"leaflet/dist/images/marker-icon.png\";\nconst defaultIcon = L.icon({\n\ticonUrl: markerIcon,\n\ticonSize: [25, 35],\n});\n*/\n\nclass PreviewImage extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.mapRef = React.createRef();\n\t\tthis.map = null;\n\t\tthis.layer = null;\n\t\tthis.imageBounds;\n\t\tthis.markers = [];\n\t}\n\n\tcomponentDidMount() {\n\t\tlet image = this.props.image;\n\t\tthis.imageBounds = new L.latLngBounds([\n\t\t\t[-image.height / 2, -image.width / 2],\n\t\t\t[image.height / 2, image.width / 2],\n\t\t]);\n\n\t\tthis.map = L.map(this.mapRef.current, {\n\t\t\tcenter: [0, 0],\n\t\t\tmaxBounds: this.imageBounds.pad(0.3),\n\t\t\tcrs: L.CRS.Simple,\n\t\t});\n\t\tthis.layer = L.imageOverlay(image.base64, this.imageBounds);\n\t\tthis.layer.addTo(this.map);\n\t\tthis.map.fitBounds(this.imageBounds);\n\n\t\t// マーカーを設置\n\t\t// これを動かして位置合わせをする\n\t\tfor (var i = 0; i < this.props.n_marker; i++) {\n\t\t\tlet divIcon = L.divIcon({\n\t\t\t\thtml: `<div class=\"bg-round\"><span>${this.props.n_marker - i}</span></div>`,\n\t\t\t\tclassName: 'divicon',\n\t\t\t});\n\t\t\tlet { lat, lng } = this.map.getCenter();\n\t\t\tlat = lat + 50 * Math.cos((2 * (i + 1) * Math.PI) / this.props.n_marker);\n\t\t\tlng = lng + 50 * Math.sin((2 * (i + 1) * Math.PI) / this.props.n_marker);\n\t\t\tlet marker = new L.marker([lat, lng], {\n\t\t\t\tdraggable: true,\n\t\t\t\ticon: divIcon,\n\t\t\t});\n\t\t\tthis.markers.push(marker);\n\t\t}\n\n\t\tconst setCorrespondingPoints = () => {\n\t\t\tlet correspondingPoint = this.markers.map((marker) => {\n\t\t\t\tlet latlng = marker.getLatLng();\n\t\t\t\t// CRS.Simpleから通常の原点座標系へ変換している\n\t\t\t\tlet point = {\n\t\t\t\t\tx: this.props.image.width / 2 + latlng.lng,\n\t\t\t\t\ty: this.props.image.height / 2 - latlng.lat,\n\t\t\t\t};\n\t\t\t\treturn point;\n\t\t\t});\n\t\t\tthis.props.onPointsSet(correspondingPoint, this.props.imageId);\n\t\t};\n\t\tsetCorrespondingPoints();\n\t\tthis.markers.forEach((marker) => {\n\t\t\tmarker.on('moveend', (event) => {\n\t\t\t\t//let position = event.target.getLatLng();\n\t\t\t\t//console.log(position);\n\t\t\t\tsetCorrespondingPoints();\n\t\t\t});\n\t\t\tmarker.addTo(this.map);\n\t\t});\n\t}\n\n\trender() {\n\t\treturn <div ref={this.mapRef} style={{ width: '100%', height: '300px' }}></div>;\n\t}\n}\n\nexport default PreviewImage;\n\nPreviewImage.propTypes = {\n\timage: PropTypes.object.isRequired,\n\timageId: PropTypes.number.isRequired,\n};\n","/* ImageTransform.jsx */\n// canvasを使って画像の位置合わせをするのをやめる\n// その代わりにleafletのピンを用いて位置の特定を行ない、\n// それをもとにopencvで位置合わせを行なう\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Box from '@material-ui/core/Box';\n\n// 自作モジュールの読み込み\nimport PreviewImage from './PreviewImage';\n\nconst warpImage = (srcA, srcB, cPointsA, cPointsB, n_points) => {\n\t// srcA, srcB: 入力画像(cv.Mat)\n\t// cPointsA, cPointsB: 対応点。javascriptの配列\n\t// n_points: 対応点の個数\n\tconst matA = cv.matFromArray(n_points, 3, cv.CV_32F, cPointsA);\n\tconst matB = cv.matFromArray(n_points, 3, cv.CV_32F, cPointsB);\n\n\t// ホモグラフィの推定\n\tconst estimateHomography = (matrixA, matrixB, method) => {\n\t\t// method: 0(default) or 4(LMEDS) or 8(RANSAC) or 16(RHO)\n\t\tlet homography = new cv.Mat(3, 3, cv.CV_32F);\n\t\thomography = cv.findHomography(matrixA, matrixB, method);\n\t\treturn homography;\n\t};\n\n\tlet H = estimateHomography(matA, matB, 0);\n\tlet dst = cv.Mat.zeros(srcB.rows, srcB.cols, cv.CV_8UC3);\n\n\tcv.warpPerspective(\n\t\tsrcA,\n\t\tdst,\n\t\tH,\n\t\tnew cv.Size(dst.cols, dst.rows),\n\t\tcv.INTER_LINEAR,\n\t\tcv.BORDER_CONSTANT,\n\t\tnew cv.Scalar()\n\t);\n\t//srcA.delete();\n\t//srcB.delete();\n\treturn dst;\n\t//dst.delete();\n};\n\nclass ImageTransform extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.images = this.props.images;\n\t\tthis.state = {\n\t\t\tcorrespondingPointsArray: [null, null],\n\t\t};\n\t\tthis.setCorrespondingPoints = this.setCorrespondingPoints.bind(this);\n\t\tthis.invisibleCanvasRef = React.createRef();\n\t\tthis.n_marker = 4;\n\t}\n\n\tsetCorrespondingPoints(correspondingPoints, id) {\n\t\tlet array = this.state.correspondingPointsArray;\n\t\tarray[id] = correspondingPoints;\n\t\tthis.setState({\n\t\t\tcorrespondingPointsArray: array,\n\t\t});\n\t}\n\n\texecuteImageMatching() {\n\t\t// マーカーの位置情報から対応点の配列を作る\n\t\tconst correspondingPoints_1 = this.state.correspondingPointsArray[0]\n\t\t\t.map((hash) => {\n\t\t\t\treturn [hash.x, hash.y, 1];\n\t\t\t})\n\t\t\t.flat();\n\t\tconst correspondingPoints_2 = this.state.correspondingPointsArray[1]\n\t\t\t.map((hash) => {\n\t\t\t\treturn [hash.x, hash.y, 1];\n\t\t\t})\n\t\t\t.flat();\n\t\t// 画像の読み出し\n\t\tconst createImgElement = (dataUrl) => {\n\t\t\tlet imgElement = new Image();\n\t\t\timgElement.src = dataUrl;\n\t\t\treturn imgElement;\n\t\t};\n\n\t\tlet image_1, image_2;\n\t\timage_1 = cv.imread(createImgElement(this.images[0].base64));\n\t\timage_2 = cv.imread(createImgElement(this.images[1].base64));\n\n\t\t// image_1をimage_2のサイズをもとに変換する\n\t\tlet new_image_1 = warpImage(image_1, image_2, correspondingPoints_1, correspondingPoints_2, this.n_marker);\n\t\t// new_image_1を一旦canvasに貼り、base64に変換する\n\t\tcv.imshow(this.invisibleCanvasRef.current, new_image_1);\n\t\tlet dataUrl = this.invisibleCanvasRef.current.toDataURL('image/png', 1);\n\t\tconst imageObject = {\n\t\t\tname: this.images[0].name + '(Transformed)',\n\t\t\tbase64: dataUrl,\n\t\t\twidth: this.invisibleCanvasRef.current.width,\n\t\t\theight: this.invisibleCanvasRef.current.height,\n\t\t};\n\t\t// Workflowに送る\n\t\tthis.props.onImageProcessingDone(imageObject);\n\t\t// 不要になったcv.Matを削除しメモリを解放\n\t\timage_1.delete();\n\t\timage_2.delete();\n\t\tnew_image_1.delete();\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Box>\n\t\t\t\t<PreviewImage\n\t\t\t\t\timageId={0}\n\t\t\t\t\timage={this.images[0]}\n\t\t\t\t\tonPointsSet={this.setCorrespondingPoints}\n\t\t\t\t\tn_marker={this.n_marker}\n\t\t\t\t/>\n\t\t\t\t<PreviewImage\n\t\t\t\t\timageId={1}\n\t\t\t\t\timage={this.images[1]}\n\t\t\t\t\tonPointsSet={this.setCorrespondingPoints}\n\t\t\t\t\tn_marker={this.n_marker}\n\t\t\t\t/>\n\t\t\t\t<canvas ref={this.invisibleCanvasRef} style={{ display: 'none' }}></canvas>\n\t\t\t</Box>\n\t\t);\n\t}\n}\n\nexport default ImageTransform;\n\nImageTransform.propTypes = {\n\timages: PropTypes.array.isRequired,\n\tonImageProcessingDone: PropTypes.func.isRequired,\n};\n","/* ImageCompare.jsx */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Switch from '@material-ui/core/Switch';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\n\n// Leaflet\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\n\n// Leaflet.Control.Opacity\nimport 'leaflet.control.opacity/dist/L.Control.Opacity.css';\nimport 'leaflet.control.opacity';\n\n// Leaflet.Sync\nimport 'leaflet.sync';\n\nconst imageObjectToImageLayer = (imageObject) => {\n\t/* 引数imageObjectとして想定されるもの\n\t{\n\t\tname: \"IMG_1192.jpg\",\n\t\twidth: 1000,\n\t\theight: 670,\n\t\tbase64: \"data:image/jpg;base64,xxxxx...\"\n\t}\n\t*/\n\tlet fileName = imageObject.name;\n\tlet width = imageObject.width;\n\tlet height = imageObject.height;\n\tlet imageLayer = L.imageOverlay(imageObject.base64, [\n\t\t[(-1 * height) / 2, (-1 * width) / 2],\n\t\t[height / 2, width / 2],\n\t]);\n\treturn { fileName: fileName, imageLayer: imageLayer };\n};\n\n// 二枚の画像をオーバーレイして表示するモード\nclass OverlayView extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.viewer;\n\t\tthis.layers = {};\n\t\tthis.viewerRef = React.createRef();\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.viewer = L.map(this.viewerRef.current, {\n\t\t\tcenter: [0, 0],\n\t\t\tcrs: L.CRS.Simple,\n\t\t\tzoom: 0,\n\t\t});\n\n\t\tthis.props.images.forEach((imageObject) => {\n\t\t\tlet { fileName, imageLayer } = imageObjectToImageLayer(imageObject);\n\t\t\tthis.layers[fileName] = imageLayer;\n\t\t});\n\t\tObject.keys(this.layers).forEach((key) => {\n\t\t\tthis.viewer.addLayer(this.layers[key]);\n\t\t});\n\n\t\tL.control\n\t\t\t.layers({}, this.layers, {\n\t\t\t\tcollapsed: false,\n\t\t\t})\n\t\t\t.addTo(this.viewer);\n\t\tL.control\n\t\t\t.opacity(this.layers, {\n\t\t\t\tlabel: '透明度を変更',\n\t\t\t\tcollapsed: false,\n\t\t\t})\n\t\t\t.addTo(this.viewer);\n\t}\n\n\trender() {\n\t\treturn <div ref={this.viewerRef} style={{ width: '100%', height: '500px' }}></div>;\n\t}\n}\n\n// 二枚の画像を並べて表示するモード\nclass MultipleView extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.viewer1;\n\t\tthis.viewer2;\n\t\tthis.viewer1Ref = React.createRef();\n\t\tthis.viewer2Ref = React.createRef();\n\t\tthis.imageLayers = [];\n\t}\n\n\tcomponentDidMount() {\n\t\t// propsから与えられた画像の読み込み\n\t\tthis.props.images.forEach((imageObject, key) => {\n\t\t\tlet { fileName, imageLayer } = imageObjectToImageLayer(imageObject);\n\t\t\tlet that = {};\n\t\t\tthat[fileName] = imageLayer;\n\t\t\tthis.imageLayers.push(that);\n\t\t});\n\t\t// 左画面を作成\n\t\tthis.viewer1 = L.map(this.viewer1Ref.current, {\n\t\t\tcenter: [0, 0],\n\t\t\tzoom: 0,\n\t\t\tcrs: L.CRS.Simple,\n\t\t});\n\t\tL.control.layers({}, this.imageLayers[0], { collapsed: false }).addTo(this.viewer1);\n\t\tthis.viewer1.addLayer(Object.values(this.imageLayers[0])[0]);\n\t\t// 右画面を作成\n\t\tthis.viewer2 = L.map(this.viewer2Ref.current, {\n\t\t\tcenter: [0, 0],\n\t\t\tzoom: 0,\n\t\t\tcrs: L.CRS.Simple,\n\t\t});\n\t\tL.control.layers({}, this.imageLayers[1], { collapsed: false }).addTo(this.viewer2);\n\t\tthis.viewer2.addLayer(Object.values(this.imageLayers[1])[0]);\n\n\t\t// 右画面と左画面の動きを連動させる\n\t\tthis.viewer1.sync(this.viewer2);\n\t\tthis.viewer2.sync(this.viewer1);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div ref={this.viewer1Ref} style={{ width: '50%', height: '500px', float: 'left' }}></div>\n\t\t\t\t<div ref={this.viewer2Ref} style={{ width: '50%', height: '500px' }}></div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nclass ImageCompare extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.OVERLAY = true;\n\t\tthis.MULTIPLE = false;\n\t\tthis.state = {\n\t\t\tview: this.OVERLAY,\n\t\t\ttoggleLabel: 'オーバーレイ表示',\n\t\t};\n\t\tthis.changeView = this.changeView.bind(this);\n\t}\n\n\tchangeView() {\n\t\tthis.setState((prevState) => ({\n\t\t\tview: !prevState.view,\n\t\t\ttoggleLabel: prevState.view == true ? '二画面表示' : 'オーバーレイ表示',\n\t\t}));\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<FormControlLabel control={<Switch checked={this.state.view} onChange={this.changeView}></Switch>} label={this.state.toggleLabel} />\n\t\t\t\t{this.state.view === this.OVERLAY && <OverlayView images={this.props.images} />}\n\t\t\t\t{this.state.view === this.MULTIPLE && <MultipleView images={this.props.images} />}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nImageCompare.propTypes = {\n\timages: PropTypes.array.isRequired,\n};\nexport default ImageCompare;\n","/* Workflow.jsx */\n\nimport React from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { Stepper, Step, StepLabel, StepContent, Button, Box, Paper, Typography } from '@material-ui/core';\n\nimport CircularProgress from '@material-ui/core/CircularProgress';\n// 自作モジュールの読み込み\nimport ImageLoader from './ImageLoader';\nimport ImageTransform from './ImageTransform';\nimport ImageCompare from './ImageCompare';\n\nconst styles = {\n\troot: {\n\t\twidth: '100%',\n\t},\n\tbutton: {\n\t\tmarginTop: '15px',\n\t\tmarginRight: '15px',\n\t},\n\tactionsContainer: {\n\t\tmarginBottom: '15px',\n\t},\n\tresetContainer: {\n\t\tpadding: '15px',\n\t},\n};\n\n// ステップごとに「進む」「戻る」ボタンの有効/無効を決めたかったのでWorkflowから分離\nclass GuideButtons extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<Box>\n\t\t\t\t<Button disabled={this.props.activeStep === 0} onClick={this.props.handleBack}>\n\t\t\t\t\t戻る\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\tdisabled={!this.props.isAllowedToStepForward}\n\t\t\t\t\tvariant='contained'\n\t\t\t\t\tcolor='primary'\n\t\t\t\t\tonClick={this.props.handleNext}\n\t\t\t\t>\n\t\t\t\t\t{this.props.activeStep === this.props.steps.length - 1 ? '終了' : '進む'}\n\t\t\t\t</Button>\n\t\t\t</Box>\n\t\t);\n\t}\n}\n\nclass Workflow extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tactiveStep: 0,\n\t\t\tinputImages: [null, null],\n\t\t\ttransformedImage: {},\n\t\t\tprocessing: false,\n\t\t};\n\t\tthis.imageCropRef = React.createRef();\n\t\tthis.steps = ['画像をアップロード', '対応点を選択', '画像比較ビュー'];\n\t}\n\n\t// ImageLoaderを複数用意するための準備\n\trenderImageLoader = (i) => {\n\t\treturn (\n\t\t\t<ImageLoader\n\t\t\t\tloaderId={i}\n\t\t\t\tonInputImageChange={(imageObject) => {\n\t\t\t\t\tlet images = this.state.inputImages;\n\t\t\t\t\timages[i] = imageObject;\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tinputImages: images,\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t/>\n\t\t);\n\t};\n\n\t// 画像処理を行なう\n\texecuteImageMatching = () => {\n\t\tthis.imageCropRef.current.executeImageMatching();\n\t};\n\t// 処理の終わった画像を受け取る関数\n\t// ImageTransformsから呼び出して使う\n\thandleImageProcessingDone = (imageObject) => {\n\t\tthis.setState({\n\t\t\ttransformedImage: imageObject,\n\t\t\tprocessing: false,\n\t\t});\n\t};\n\n\t// Stepperの挙動を制御する関数\n\thandleNext = () => {\n\t\tthis.setState((prevState) => ({\n\t\t\tactiveStep: prevState.activeStep + 1,\n\t\t}));\n\t};\n\thandleBack = () => {\n\t\tthis.setState((prevState) => ({\n\t\t\tactiveStep: prevState.activeStep - 1,\n\t\t}));\n\t};\n\thandleReset = () => {\n\t\tthis.setState({\n\t\t\tactiveStep: 0,\n\t\t});\n\t};\n\n\tgetEachSteps = (step) => {\n\t\tswitch (step) {\n\t\t\tcase 0:\n\t\t\t\treturn (\n\t\t\t\t\t<StepContent>\n\t\t\t\t\t\t<Box>\n\t\t\t\t\t\t\t<Typography>処理を行なう画像をアップロード</Typography>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{this.renderImageLoader(0)}\n\t\t\t\t\t\t\t\t{this.renderImageLoader(1)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<GuideButtons\n\t\t\t\t\t\t\tactiveStep={this.state.activeStep}\n\t\t\t\t\t\t\thandleBack={this.handleBack}\n\t\t\t\t\t\t\thandleNext={this.handleNext}\n\t\t\t\t\t\t\tisAllowedToStepForward={\n\t\t\t\t\t\t\t\t// 画像が二枚選択されていないと次に進めないようにする\n\t\t\t\t\t\t\t\tthis.state.inputImages.length == 2 &&\n\t\t\t\t\t\t\t\tthis.state.inputImages.every((inputImage) => {\n\t\t\t\t\t\t\t\t\treturn inputImage != null;\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsteps={this.steps}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</StepContent>\n\t\t\t\t);\n\t\t\tcase 1:\n\t\t\t\treturn (\n\t\t\t\t\t<StepContent>\n\t\t\t\t\t\t<Box>\n\t\t\t\t\t\t\t<Typography>\n\t\t\t\t\t\t\t\tマーカーを動かして二つの画像の間で対応する点を指定してください。マーカーを動かし終わったら処理実行ボタンを押してください。\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\t\t\tcolor='secondary'\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\tprocessing: true,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tthis.executeImageMatching();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t処理実行\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<ImageTransform\n\t\t\t\t\t\t\t\tref={this.imageCropRef}\n\t\t\t\t\t\t\t\timages={this.state.inputImages}\n\t\t\t\t\t\t\t\tonImageProcessingDone={this.handleImageProcessingDone}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{this.state.processing == true && <CircularProgress />}\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<GuideButtons\n\t\t\t\t\t\t\tactiveStep={this.state.activeStep}\n\t\t\t\t\t\t\thandleBack={this.handleBack}\n\t\t\t\t\t\t\thandleNext={this.handleNext}\n\t\t\t\t\t\t\tisAllowedToStepForward={this.state.transformedImage.base64 != undefined}\n\t\t\t\t\t\t\tsteps={this.steps}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</StepContent>\n\t\t\t\t);\n\t\t\tcase 2:\n\t\t\t\treturn (\n\t\t\t\t\t<StepContent>\n\t\t\t\t\t\t<Box>\n\t\t\t\t\t\t\t<Typography>処理結果</Typography>\n\t\t\t\t\t\t\t{this.state.inputImages[1] != null && (\n\t\t\t\t\t\t\t\t<ImageCompare images={[this.state.transformedImage, this.state.inputImages[1]]} />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<GuideButtons\n\t\t\t\t\t\t\tactiveStep={this.state.activeStep}\n\t\t\t\t\t\t\thandleBack={this.handleBack}\n\t\t\t\t\t\t\thandleNext={this.handleNext}\n\t\t\t\t\t\t\tisAllowedToStepForward={true}\n\t\t\t\t\t\t\tsteps={this.steps}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</StepContent>\n\t\t\t\t);\n\t\t\tdefault:\n\t\t\t\treturn (\n\t\t\t\t\t<StepContent>\n\t\t\t\t\t\t<Typography>Unknown step</Typography>\n\t\t\t\t\t</StepContent>\n\t\t\t\t);\n\t\t}\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<Box className={this.props.classes.root}>\n\t\t\t\t<Stepper activeStep={this.state.activeStep} orientation='vertical'>\n\t\t\t\t\t{this.steps.map((label, index) => (\n\t\t\t\t\t\t<Step key={label}>\n\t\t\t\t\t\t\t<StepLabel>{label}</StepLabel>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t// 各ステップがここに挿入される\n\t\t\t\t\t\t\t\tthis.getEachSteps(index)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</Step>\n\t\t\t\t\t))}\n\t\t\t\t</Stepper>\n\t\t\t\t{this.state.activeStep === this.steps.length && (\n\t\t\t\t\t<Paper square elevation={0} className={this.props.classes.resetContainer}>\n\t\t\t\t\t\t<Typography>処理が完了しました</Typography>\n\t\t\t\t\t\t<Button onClick={this.handleReset} className={this.props.classes.button}>\n\t\t\t\t\t\t\t最初に戻る\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Paper>\n\t\t\t\t)}\n\t\t\t</Box>\n\t\t);\n\t}\n}\n\nexport default withStyles(styles)(Workflow);\n","/* opencv-utils.js \n *\n * Overview\n * OpenCV.jsを使用する際、そのファイルの読み込みの順番やスクリプトの実行のタイミングを考慮しながらプログラムを書くのが難しい。\n * そこで、OpenCV.jsを読み込み安全に処理を実行できるようユーティリティを開発した。\n * このスクリプトには原型があって、それを参考に独自のスクリプトを作成した(下記Referenceの項を参照)。\n *\n * Usage\n * const utils = new opencvUtils();\n * utils.loadOpenCV(\"https://docs.opencv.org/3.4.0/opencv.js\", () => {\n * \tutils.executeScript(\"./process.js\");\n * });\n *\n * Reference\n * https://docs.opencv.org/3.4/utils.js\n *\n * Homepage\n * https://github.com/YUUKIToriyama/opencv-utils.js\n *\n */\n\nconst opencvUtils = class {\n\tloadOpenCV(OPENCV_URL, onloadCallback) {\n\t\t/*\n\t\t * utils.loadOpenCV(url, callback);\n\t\t *\n\t\t * OpenCV.jsを読み込むための函数。\n\t\t * 以下のようなscriptタグを生成し、ドキュメントに挿入する。\n\t\t * <script async type=\"text/javascript\" src=\"OPENCV_URL\"></script>\n\t\t * さらにイベントリスナーには読み込みが完了した際、OpenCV.jsのビルド情報を出力する函数を設定している。\n\t\t *\n\t\t */\n\t\tlet script = document.createElement(\"script\");\n\t\tscript.setAttribute(\"async\", \"\");\n\t\tscript.setAttribute(\"type\", \"text/javascript\");\n\t\tscript.addEventListener(\"load\", () => {\n\t\t\tif (cv.getBuildInformation) {\n\t\t\t\t// opencvの読み込みが完了している場合\n\t\t\t\tconsole.log(cv.getBuildInformation());\n\t\t\t\tonloadCallback();\n\t\t\t} else {\n\t\t\t\t// opencvの読み込みを待っている場合\n\t\t\t\tcv[\"onRuntimeInitialized\"] = () => {\n\t\t\t\t\tconsole.log(cv.getBuildInformation());\n\t\t\t\t\tonloadCallback();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tscript.addEventListener(\"error\", () => {\n\t\t\tconsole.error(\"Failed to load \" + OPENCV_URL);\n\t\t});\n\t\tscript.src = OPENCV_URL;\n\t\tlet node = document.querySelector(\"head\");\n\t\tnode.appendChild(script);\n\t}\n\n\tloadImage(url, callback) {\n\t\t/*\n\t\t * utils.loadImage(url, (src) => {\n\t\t * \t\tcv.imshow(\"mycanvas\", src);\n\t\t * });\n\t\t *\n\t\t * 引数によって指定された画像を読み込みimg要素を返す函数。\n\t\t */\n\t\tlet img = new Image();\n\t\timg.crossOrigin = \"anonymous\";\n\t\timg.src = url;\n\t\timg.onload = () => {\n\t\t\tconst src = cv.imread(img, cv.IMREAD_COLOR);\n\t\t\tcallback(src);\n\t\t\tsrc.delete();\n\t\t}\n\t}\n\n\texecuteScript(url) {\n\t\t/*\n\t\t * utils.executeSctipt(url);\n\t\t *\n\t\t * 引数によって指定されたスクリプトファイルを読み出し実行する函数。\n\t\t * 実行するときはloadOpenCV()の後でなければならない。\n\t\t * あるいは次のようにloadOpenCV()のcallbackに指定しても良い。\n\t\t *\n\t\t * Util.loadOpenCV(() => {\n\t\t *\tUtil.executeScript(\"./process.js\");\n\t\t * });\n\t\t */\n\t\tconst SCRIPT_URL = url;\n\t\tlet script = document.createElement(\"script\");\n\t\tscript.setAttribute(\"type\", \"text/javascript\");\n\t\tscript.src = SCRIPT_URL;\n\t\tscript.addEventListener(\"load\", () => {\n\t\t\tconsole.log(\"Now loading \" + SCRIPT_URL);\n\t\t});\n\t\tscript.addEventListener(\"onload\", () => {\n\t\t\tconsole.log(\"Executing \" + SCRIPT_URL);\n\t\t});\n\t\tlet node = document.querySelector(\"body\");\n\t\tnode.appendChild(script);\n\t}\n\n\tstatic credit() {\n\t\tconsole.log(\"(C) Copyright 2020 YUUKIToriyama, All Rights Reserved.\");\n\t}\n}\nexport default opencvUtils;\n","/* LoadingSpinner.jsx */\n/*\n * OpenCV.jsの読み込みに時間がかかるので読み込んでいるあいだスピナーを表示します\n *\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Box, Typography, CircularProgress, Icon } from '@material-ui/core';\nimport DoneIcon from '@material-ui/icons/Done';\n\n// 自作モジュールの読み込み\nimport ScrollDialog from './ScrollDialog';\n\nclass LoadingSpinner extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<Box>\n\t\t\t\t{!this.props.opencvLoaded ? (\n\t\t\t\t\t<CircularProgress />\n\t\t\t\t) : (\n\t\t\t\t\t<Icon color='primary' fontSize='large'>\n\t\t\t\t\t\t<DoneIcon />\n\t\t\t\t\t</Icon>\n\t\t\t\t)}\n\t\t\t\t<Typography>{!this.props.opencvLoaded ? 'Now Loading OpenCV.js...' : 'OpenCV.js has been loaded on your browser!'}</Typography>\n\t\t\t\t{this.props.opencvLoaded == true && (\n\t\t\t\t\t<ScrollDialog\n\t\t\t\t\t\tlabel='About OpenCV.js'\n\t\t\t\t\t\ttitle='Build information'\n\t\t\t\t\t\tcontent={cv\n\t\t\t\t\t\t\t.getBuildInformation()\n\t\t\t\t\t\t\t.split('\\n')\n\t\t\t\t\t\t\t.map((line, key) => (\n\t\t\t\t\t\t\t\t<span key={key}>\n\t\t\t\t\t\t\t\t\t{line}\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</Box>\n\t\t);\n\t}\n}\nexport default LoadingSpinner;\n\nLoadingSpinner.propsTypes = {\n\topencvLoaded: PropTypes.bool.isRequired,\n};\nLoadingSpinner.defaultProps = {\n\topencvLoaded: false,\n};\n","/* MainContent.jsx */\nimport React from 'react';\n\n// 自作モジュールの読み込み\nimport Workflow from './Workflow';\nimport opencvUtils from '../opencv-utils/opencv-utils.js';\nimport LoadingSpinner from './LoadingSpinner';\n\nclass MainContent extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\topencvLoaded: false,\n\t\t};\n\t}\n\t// Appコンポーネントが呼び出されたら次はOpenCV.jsの読み込みを行なう\n\tcomponentDidMount() {\n\t\tconst opencv_utils = new opencvUtils();\n\t\topencv_utils.loadOpenCV('https://docs.opencv.org/4.5.0/opencv.js', () => {\n\t\t\t// OpenCV.jsの読み込みが完了したらstate.loadingをfalseにする\n\t\t\tthis.setState({\n\t\t\t\topencvLoaded: true,\n\t\t\t});\n\t\t});\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<LoadingSpinner opencvLoaded={this.state.opencvLoaded} />\n\t\t\t\t<Workflow />\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default MainContent;\n","/* App.jsx */\nimport React from 'react';\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport orange from '@material-ui/core/colors/orange';\n\n// 自作モジュールの読み込み\nimport MyAppBar from './components/MyAppBar.jsx';\nimport MainContent from './components/MainContent.jsx';\n\nconst theme = createMuiTheme({\n\tpalette: {\n\t\tprimary: orange,\n\t},\n\ttypography: {\n\t\tfontFamily: ['Roboto', 'Noto Sans'].join(','),\n\t\tfontSize: 13,\n\t\th1: {\n\t\t\tfontSize: '1.75rem',\n\t\t},\n\t\th2: {\n\t\t\tfontSize: '1.5rem',\n\t\t},\n\t\th3: {\n\t\t\tfontSize: '1.25rem',\n\t\t},\n\t\th4: {\n\t\t\tfontSize: '1.125rem',\n\t\t},\n\t\th5: {\n\t\t\tfontSize: '1rem',\n\t\t},\n\t\th6: {\n\t\t\tfontSize: '1rem',\n\t\t},\n\t},\n});\n\nconst appName = 'imageCompare';\nconst appInfo = `\nimageCompare 0.9\nhttps://github.com/YUUKIToriyama/imageCompare\n(C)Copyright 2020 YUUKIToriyama All Rights Reserved.\n`;\n\nclass App extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<ThemeProvider theme={theme}>\n\t\t\t\t<CssBaseline />\n\t\t\t\t<MyAppBar title={appName} message={appInfo} />\n\t\t\t\t<MainContent />\n\t\t\t</ThemeProvider>\n\t\t);\n\t}\n}\n\nexport default App;\n","/* index.js */\n\n// react\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\n\n// styleSheet\nimport \"./style.css\";\n\n// Appコンポーネントを読み込む\nimport App from \"./App.jsx\";\nReactDOM.render(<App/>, document.getElementById(\"app\"));\n"],"sourceRoot":""}